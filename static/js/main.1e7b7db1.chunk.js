(this["webpackJsonptechnotes-frontend"]=this["webpackJsonptechnotes-frontend"]||[]).push([[0],{101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(24),i=n.n(r),s=n(22),o=n(10),l=n(11),d=n(35),j=n(8),u=n(55),b="__app__loggedin__key__",h="".concat("https://technotes-api.herokuapp.com","/api/").concat("v1"),O=function(){var e=localStorage.getItem(b);if(e){var t=Object(u.a)(e).exp;if(Date.now()<1e3*t)return e}return localStorage.removeItem(b),!1};function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MM/dd/yyyy",n=new Date(e);function c(e){return e<10?"0".concat(e):e}var a=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=null!==t&&void 0!==t?t:"M/d/yyyy",s=n.getDate(),o=n.getMonth(),l=n.getFullYear(),d=n.getHours(),j=n.getMinutes(),u=n.getSeconds(),b=n.getMilliseconds(),h=d%12,O=c(h),m=c(d),x=c(j),f=c(u),v=d<12?"AM":"PM",g=r[n.getDay()],p=g.substr(0,3),y=c(s),N=o+1,S=c(N),w=a[o],C=w.substr(0,3),M="".concat(l),k=M.substr(2,2);return i=(i=i.indexOf("MMM")>-1?i.replace("MMMM",w).replace("MMM",C):i.replace("MM",S).replace("M",N)).replace("hh",O).replace("h",h).replace("HH",m).replace("H",d).replace("mm",x).replace("m",j).replace("ss",f).replace("s",u).replace("S",b).replace("dd",y).replace("d",s).replace("EEEE",g).replace("EEE",p).replace("yyyy",M).replace("yy",k).replace("AA",v).replace("aaa",v)}var x=n(1),f=Object(c.createContext)();var v=function(e){var t=e.children,n=Object(c.useState)(null),a=Object(j.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){i(O())}),[]),Object(x.jsx)(f.Provider,{value:{user:r,setUser:i,loggedIn:Boolean(r),logOut:function(){i(null),localStorage.removeItem(b)}},children:t})},g=n(67),p=n.n(g).a.create({baseURL:h,headers:{"Content-Type":"application/json"},proxy:{host:"localhost",port:4e3}});p.interceptors.request.use((function(e){var t=O();return t&&(e.headers["X-Jwt-Token"]="Bearer ".concat(t)),e}));p.interceptors.response.use((function(e){return e.data}),(function(e){return function(e){return e.response?Promise.reject(Object(l.a)(Object(l.a)({},e.response.data),{},{__error:e})):e.request?Promise.reject(e.request):Promise.reject(e.message)}(e)})),window.axios=p;var y=p,N={login:function(e){return y.post("/auth",{mail:e})},getNotes:function(){return y.get("/note?page=1&size=10")},getNote:function(e){return y.get("/note/".concat(e))},addNote:function(e){return y.post("/note",e)},updateNote:function(e,t){return y.put("/note/".concat(e),t)},deleteNote:function(e){return y.delete("/note/".concat(e))},getSharedNotes:function(){return y.get("/note/share")},shareNote:function(e){return y.post("/note/share",e)},editSharedNote:function(e,t){return y.put("note/share/".concat(e),{data:t})},notesSharedByMe:function(){return y.get("/note/user/shared-by-me")}},S=Object(c.createContext)();var w=function(e){var t=e.children,n=Object(c.useState)([]),a=Object(j.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(!0),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(c.useContext)(f).loggedIn,b=Object(c.useCallback)((function(){d(!0),N.getNotes().then((function(e){i(e.notes)})).finally((function(){return d(!1)}))}),[]);return Object(c.useEffect)((function(){u&&b()}),[u,b]),Object(x.jsx)(S.Provider,{value:{notes:r,setNotes:i,fetchNotes:b,loading:l},children:t})},C=function(){return Object(c.useContext)(f)},M=function(){return Object(c.useContext)(S)},k=function(e){var t=e.children,n=Object(d.a)(e,["children"]),a=C().loggedIn,r=Object(o.g)();return Object(c.useEffect)((function(){a||r.push("/")}),[r,a]),Object(x.jsx)(o.b,Object(l.a)(Object(l.a)({},n),{},{render:function(){return a?t:Object(x.jsx)(o.a,{to:"/"})}}))},E=n(69),_=n(113),A=n(114),B=n(107);var I=function(e){var t=e.logOut,n=Object(o.g)();return Object(x.jsx)(A.a,{className:"ml-auto",children:Object(x.jsxs)(B.a,{drop:"down",alignRight:!0,title:"Home",id:"menu",children:[Object(x.jsx)(B.a.Item,{as:s.b,to:"/home",children:"Home"}),Object(x.jsx)(B.a.Item,{as:s.b,to:"/shared",children:"Shared Notes"}),Object(x.jsx)(B.a.Divider,{}),Object(x.jsx)(B.a.Item,{onClick:function(){t(),n.push("/")},className:"cursor-pointer",as:"span",children:"Logout"})]})})},D=function(){var e=C(),t=e.loggedIn,n=e.logOut;return Object(x.jsxs)(_.a,{className:"navigation-bar",bg:"dark",sticky:"top",variant:"dark",children:[Object(x.jsx)(_.a.Brand,{href:"/",children:"TechNotes"}),t&&Object(x.jsx)(I,{logOut:n})]})};var F=function(e){var t=e.children,n=Object(d.a)(e,["children"]);return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(D,{}),Object(x.jsx)("main",Object(l.a)(Object(l.a)({},n),{},{children:t}))]})},T=n(111),H=n(112),L=n(108);var z=function(e){var t=e.show,n=e.onClose,a=Object(c.useState)(""),r=Object(j.a)(a,2),i=r[0],s=r[1],l=Object(c.useState)(null),d=Object(j.a)(l,2),h=d[0],O=d[1],m=Object(c.useState)(!1),f=Object(j.a)(m,2),v=f[0],g=f[1],p=Object(o.g)(),y=C().setUser;return Object(x.jsxs)(T.a,{show:t,onHide:n,children:[Object(x.jsx)(T.a.Header,{closeButton:!0,children:Object(x.jsx)(T.a.Title,{children:"Login"})}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),O(null),g(!0),N.login(i).then((function(e){!function(e){if(e){var t=Object(u.a)(e).exp;if(Date.now()<1e3*t)return localStorage.setItem(b,e),!0}}(e.jwt),y(e.jwt),p.push("/home")})).catch((function(){O("Authentication failed, try again!"),console.log("There was an error")})).finally((function(){return g(!1)}))},children:[Object(x.jsxs)(T.a.Body,{children:[Object(x.jsxs)(H.a.Group,{children:[Object(x.jsx)(H.a.Label,{children:"Email"}),Object(x.jsx)(H.a.Control,{required:!0,type:"email",placeholder:"Enter your email address",value:i,onChange:function(e){return s(e.target.value)}})]}),h&&Object(x.jsx)("strong",{className:"text-danger",children:h})]}),Object(x.jsxs)(T.a.Footer,{children:[Object(x.jsx)(E.a,{disabled:v,variant:"secondary",onClick:n,children:"Close"}),Object(x.jsxs)(E.a,{disabled:v,variant:"primary",type:"submit",children:["Submit ",v&&Object(x.jsx)(L.a,{animation:"border",size:"sm"})]})]})]})]})};var P=function(e){var t=e.history,n=Object(c.useState)(!1),a=Object(j.a)(n,2),r=a[0],i=a[1],s=C().loggedIn;return Object(c.useEffect)((function(){s&&t.push("/home")}),[t,s]),Object(x.jsxs)(F,{children:[Object(x.jsx)("div",{className:"center-item",children:Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsx)("h1",{children:"Login to view your Notes"}),Object(x.jsx)("br",{}),Object(x.jsx)(E.a,{onClick:function(){return i(!0)},type:"primary",to:"/home",children:"Login"})]})}),Object(x.jsx)(z,{show:r,onClose:function(){return i(!1)}})]})};var U=function(e){var t=e.onSubmit,n=e.title,c=e.details,a=e.onChange,r=e.disabled,i=void 0!==r&&r;return Object(x.jsxs)("form",{className:"note-editor-form",autoComplete:"off",onSubmit:t,children:[Object(x.jsxs)("div",{className:"title-input",children:[Object(x.jsxs)("label",{className:"title-label",htmlFor:"note-title-input",children:[Object(x.jsx)("span",{children:"Enter a title for your note"}),Object(x.jsx)(E.a,{disabled:i,className:"note-button",type:"submit",variant:"primary",children:"Save"})]}),Object(x.jsx)("input",{id:"note-title-input",type:"text",name:"title",value:n,onChange:a,required:!0})]}),Object(x.jsxs)("div",{className:"content-input",children:[Object(x.jsx)("label",{className:"offscreen",htmlFor:"note-body-input",children:"Enter the body for your note"}),Object(x.jsx)("textarea",{id:"note-body-input",name:"details",value:c,onChange:a,required:!0})]})]})};var q=function(e){var t=e.onAdd,n=Object(c.useState)("Untitled"),a=Object(j.a)(n,2),r=a[0],i=a[1],s=Object(c.useState)(!0),o=Object(j.a)(s,2),l=o[0],d=o[1],u=Object(c.useState)(""),b=Object(j.a)(u,2),h=b[0],O=b[1],m=M().setNotes;return Object(x.jsx)("div",{className:"note-viewer",children:Object(x.jsx)("div",{className:"note-editor",children:Object(x.jsx)(U,{disabled:l,title:r,details:h,onChange:function(e){var t=e.target,n=t.name,c=t.value;d(!1),"title"===n&&i(c),"details"===n&&O(c)},onSubmit:function(e){e.preventDefault();var n={title:r,details:h};d(!0),N.addNote(n).then((function(e){e.id?(m((function(t){return[e].concat(t)})),t(e)):alert("Something went wrong, try again!")})).finally((function(){return d(!1)}))}})})})};var J=function(e){var t=e.toggleSidebar;return Object(x.jsx)("section",{className:"col note-viewer",children:Object(x.jsxs)("div",{className:"note-empty",children:[Object(x.jsx)("span",{className:"note-empty-text",children:"Click a note on the left to view note!"}),Object(x.jsx)(E.a,{className:"empty-list",onClick:t,variant:"info",size:"sm",children:"View All"})]})})},V=n(42);var R=function(e){var t=e.note,n=e.toggleEditing,a=e.onUpdate,r=Object(c.useState)(Object(l.a)({},t)),i=Object(j.a)(r,2),s=i[0],o=i[1],d=Object(c.useState)(!0),u=Object(j.a)(d,2),b=u[0],h=u[1],O=M().setNotes;Object(c.useEffect)((function(){o(t);var e=function(e){27===e.keyCode&&n()};return window.addEventListener("keyup",e),function(){return window.removeEventListener("keyup",e)}}),[t,n]);var m=s.title,f=s.details;return Object(x.jsx)("div",{className:"note-editor",children:Object(x.jsx)(U,{disabled:b,title:m,details:f,onChange:function(e){h(!1);var t=e.target,n=t.name,c=t.value;o((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(V.a)({},n,c))}))},onSubmit:function(e){e.preventDefault();var t={title:m,details:f};h(!0),N.updateNote(s.id,t).then((function(e){e.note?(O((function(t){return t.map((function(t){return t.id===s.id?Object(l.a)(Object(l.a)({},t),e.note):t}))})),a(e)):alert("Something went wrong, try again!")})).finally((function(){return h(!1)}))}})})};var G=function(e){var t,n=e.note,c=e.toggleEditing,a=e.toggleSidebar,r=e.handleShareButtonClick;return Object(x.jsxs)("div",{className:"note",children:[Object(x.jsxs)("div",{className:"note-header",children:[Object(x.jsx)("h1",{className:"note-title",children:n.title}),Object(x.jsxs)("div",{className:"note-menu",role:"menubar",children:[Object(x.jsxs)("small",{className:"note-updated-at",role:"status",children:["Last Updated ",m(null!==(t=n.last_edit)&&void 0!==t?t:n.created,"dd MMM, yyyy")]}),Object(x.jsxs)("div",{className:"d-flex",children:[Object(x.jsx)(E.a,{className:"note-button toggle-button",size:"sm",variant:"outline-dark",onClick:a,children:"All Notes"}),Object(x.jsx)(E.a,{onClick:c,className:"note-button",size:"sm",variant:"primary",children:"Edit"}),Object(x.jsx)(E.a,{onClick:r,className:"note-button ml-2",size:"sm",variant:"secondary",children:"Share"})]})]})]}),Object(x.jsx)("div",{className:"note-preview",children:n.details})]})},K=function(e){var t=e.note,n=e.toggleSidebar,a=Object(c.useState)(!1),r=Object(j.a)(a,2),i=r[0],s=r[1];return Object(x.jsxs)("section",{className:"note-viewer",children:[i&&Object(x.jsx)(R,{toggleEditing:function(){return s(!i)},note:t,onUpdate:function(){s(!1)}}),!i&&Object(x.jsx)(G,{note:t,handleShareButtonClick:function(){var e=prompt("Enter the email address to share.");/^[^\s@]+@[^\s@]+$/.test(e)&&N.shareNote({shared_to:e,note_id:t.id}).then((function(t){if(t.model.is_shared){var n,c=null!==(n=t.model.target_user.first_name)&&void 0!==n?n:e;alert("Note shared with ".concat(c," successfully!"))}}))},toggleEditing:function(){return s(!i)},toggleSidebar:n})]})},W=n.p+"static/media/trash.e4efcb06.svg";var X=function(e){var t,n=e.item,c=e.isActive,a=e.onClick,r=M().setNotes;return Object(x.jsx)("li",{children:Object(x.jsxs)("div",{onClick:function(){return a(n.id)},className:["sidebar-note-list-item",c&&"active"].join(" "),children:[Object(x.jsxs)("header",{className:"sidebar-note-header",children:[Object(x.jsx)("strong",{children:n.title}),Object(x.jsx)("small",{children:m(null!==(t=n.last_edit)&&void 0!==t?t:n.created,"hh:mm aaa")})]}),Object(x.jsx)("button",{onClick:function(){window.confirm("Are you sure?")&&N.deleteNote(n.id).then((function(e){"deleted"===e.note&&r((function(e){return e.filter((function(e){return e.id!==n.id}))}))}))},type:"button",className:"action-button",children:Object(x.jsx)("img",{src:W,alt:"delete"})})]})},n.id)};var Y=function(e){var t=e.items,n=void 0===t?[]:t,c=e.active,a=e.onActive,r=M().loading;return Object(x.jsxs)("nav",{children:[r&&Object(x.jsx)("div",{className:"sidebar-loading",children:Object(x.jsx)(L.a,{animation:"border"})}),!r&&n.length<=0&&Object(x.jsx)("div",{className:"sidebar-empty",children:Object(x.jsx)("strong",{children:"No Item Found"})}),!r&&n.length>0&&Object(x.jsx)("ul",{className:"notes-list",children:n.map((function(e){return Object(x.jsx)(X,{isActive:c===e.id,onClick:a,item:e},e.id)}))})]})};var $=function(e){var t=e.title,n=void 0===t?"My Notes":t,c=e.onNew,a=e.openSidebar,r=Object(d.a)(e,["title","onNew","openSidebar"]);return Object(x.jsxs)("section",{className:["sidebar",a&&"open"].join(" "),children:[Object(x.jsxs)("section",{className:"sidebar-header",children:[Object(x.jsx)("h4",{children:n}),Object(x.jsx)(E.a,{onClick:c,className:"note-button",size:"sm",variant:"primary",children:"New"})]}),Object(x.jsx)(Y,Object(l.a)({},r))]})};var Q=function(){var e=Object(c.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),i=Object(j.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)(null),d=Object(j.a)(l,2),u=d[0],b=d[1],h=M().notes,O=null===h||void 0===h?void 0:h.find((function(e){return e.id===u}));return Object(x.jsx)(F,{children:Object(x.jsxs)("div",{className:"main",children:[Object(x.jsx)($,{active:u,onActive:function(e){b(e),a(!1)},openSidebar:n,onNew:function(){o(!s),b(null),a(!1)},items:h}),s&&Object(x.jsx)(q,{onAdd:function(e){o(!s),b(e.id)}}),!s&&O&&Object(x.jsx)(K,{note:O,toggleSidebar:function(){return a(!n)}}),!s&&!O&&Object(x.jsx)(J,{toggleSidebar:function(){return a(!n)}}),!s&&!O||n&&Object(x.jsx)("div",{onClick:function(){return a(!n)},className:"overlay-sidebar"})]})})};var Z=function(){return Object(x.jsx)(F,{children:Object(x.jsx)("div",{className:"center-item",children:Object(x.jsxs)("center",{children:[Object(x.jsx)("h2",{children:"Not Found"}),Object(x.jsx)("br",{}),Object(x.jsx)(E.a,{as:s.b,to:"/",children:"Go Back"})]})})})},ee=n(109),te=n(110),ne=n(70),ce=n(115),ae=n(30),re=Object(c.forwardRef)((function(e,t){var n=e.onClick;return Object(x.jsx)("a",{href:"##",ref:t,onClick:function(e){e.preventDefault(),n(e)},children:Object(x.jsx)("svg",{height:24,width:15,focusable:"false",viewBox:"0 0 24 24","aria-hidden":"true",children:Object(x.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})})})}));var ie=function(e){var t=e.item,n=e.onView,c="".concat(t.note.details).split(" ");return Object(x.jsxs)(ce.a,{className:"mb-2 shared-item",children:[Object(x.jsxs)(ce.a.Header,{children:[Object(x.jsx)("h6",{children:t.note.title}),Object(x.jsxs)(ae.a,{alignRight:!0,children:[Object(x.jsx)(ae.a.Toggle,{as:re,id:"dropdown-menu-".concat(t.id)}),Object(x.jsx)(ae.a.Menu,{children:Object(x.jsx)(ae.a.Item,{onClick:n,eventKey:"1",children:"View Details"})})]})]}),Object(x.jsx)(ce.a.Body,{children:Object(x.jsxs)(ce.a.Text,{children:[c.slice(0,20).join(" "),c.length>20?"...":""]})})]})};var se=function(e){var t=e.show,n=e.item,c=e.handleClose;return n?Object(x.jsxs)(T.a,{show:t,onHide:c,children:[Object(x.jsx)(T.a.Header,{closeButton:!0,children:Object(x.jsx)(T.a.Title,{children:"View Shared Note Details"})}),Object(x.jsxs)(T.a.Body,{children:[Object(x.jsxs)("h5",{children:["Note Shared to:"," ",Object(x.jsx)("a",{href:"mailto:".concat(n.target_user.mail),children:Object(x.jsx)("i",{children:n.target_user.mail})})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("i",{children:"Shared On: "}),Object(x.jsx)("strong",{children:m(n.created,"dd MMM, yyyy - hh:mm AA")})]}),Object(x.jsx)("hr",{}),Object(x.jsx)("h4",{children:n.note.title}),Object(x.jsx)("div",{className:"note-preview",children:n.note.details})]}),Object(x.jsx)(T.a.Footer,{children:Object(x.jsx)(E.a,{variant:"secondary",onClick:c,children:"Close"})})]}):null};var oe=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(null),i=Object(j.a)(r,2),s=i[0],o=i[1],l=Object(c.useState)([]),d=Object(j.a)(l,2),u=d[0],b=d[1];return Object(c.useEffect)((function(){a(!0),N.getSharedNotes().then((function(e){b(e.models)})).finally((function(){return a(!1)}))}),[]),Object(x.jsxs)(F,{children:[Object(x.jsxs)("div",{className:"main shared-page",children:[Object(x.jsx)("div",{className:"shared-items",children:Object(x.jsx)("h3",{children:"Shared Notes"})}),n&&Object(x.jsx)(L.a,{animation:"border"}),!n&&Object(x.jsx)(ee.a,{children:Object(x.jsx)(te.a,{children:u.map((function(e){return Object(x.jsx)(ne.a,{lg:3,md:4,sm:6,xs:12,children:Object(x.jsx)(ie,{onView:function(){return o(e)},item:e})},e.id)}))})})]}),Object(x.jsx)(se,{show:Boolean(s),item:s,handleClose:function(){return o(null)}})]})};var le=function(){return Object(x.jsxs)(o.d,{children:[Object(x.jsx)(o.b,{path:"/",exact:!0,component:P}),Object(x.jsx)(k,{path:"/home",exact:!0,children:Object(x.jsx)(Q,{})}),Object(x.jsx)(k,{path:"/shared",exact:!0,children:Object(x.jsx)(oe,{})}),Object(x.jsx)(o.b,{path:"*",exact:!0,component:Z})]})},de=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,116)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};n(101);i.a.render(Object(x.jsx)(a.a.StrictMode,{children:Object(x.jsx)(s.a,{children:Object(x.jsx)(v,{children:Object(x.jsx)(w,{children:Object(x.jsx)(le,{})})})})}),document.getElementById("root")),de()}},[[102,1,2]]]);
//# sourceMappingURL=main.1e7b7db1.chunk.js.map